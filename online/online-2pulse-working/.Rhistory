power.t.test(n = NULL, delta = 15, sd = 12, sig.level = 0.05, power = .9, type = 'two.sample', alt = 'two.sided')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
selected_actions
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
data_for_model
head(data_for_model)
names(data_for_model)
head(as.data.frame(data_for_model))
q.fit = update_model(data_for_model)
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
head(data_for_model)
summary(q.fit)
one.animal.idx+animal.idx-minibatch_size
animal.idx
minibatch_parameters = make_parameter_mat(minibatch_size)
parameter_mat = cbind(parameter_mat, minibatch_parameters)
data_mat = generate_one_batch(minibatch_size = minibatch_size, minibatch_parameters = minibatch_parameters, wait_time=wait_time, animal.idx = animal.idx)
data_for_model = prep_data_for_model(all_data_mat, data_mat, potential_actions = potential_actions)
q.fit = update_model(data_for_model)
eps =eps*eps_decay
eps.vec = c(eps.vec, eps)
action_mat = matrix(NA, nrow = minibatch_size, ncol=num_free_pulses)
for(one.animal.idx in 1:minibatch_size){
if(rnorm(1)<eps){
action_mat[one.animal.idx,] = get_action(q.fit=q.fit, one.animal = one.animal.idx+animal.idx-minibatch_size, maxtime=40, potential.action.mat = potential.action.mat, nsamples=1)
}else{
action_mat[one.animal.idx,] = sample(potential_actions,1)
}
}
one.animal.idx
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
head(all_data_mat)
source('~/RPAI/online/online-2pulse-working/online_engine.R')
one.animal
summary(q.fit)
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
selected_actions
git branch diropt
?optim
r.to.unit = function(x){1/(1+exp(x))}
setwd("C:/Users/s198663/Documents/RPAI/online/online-2pulse-working")
source("data_generation_fncs.R")
source("env_fncs_2pulse.R")
set.seed(1998)
max_animals=1000
test_num=100
maxtime = 40
num_free_pulses=1
eps=1
eps_decay=.99
eps.vec=c()
wait_time=7
state_mat = matrix(NA, nrow = 0, ncol=4)
colnames(state_mat) = c("ltv", "day", 'd','animal')
potential_actions = 1:13 + wait_time
minibatch_size=100
rewards = c()
mouse=0
epoch=1
potential.action.mat = make_potential_action_mat(potential_actions = potential_actions, num_free_pulses = num_free_pulses)
colnames(potential.action.mat)="action"
all_data_mat = matrix(nrow=0, ncol=4)
colnames(all_data_mat) = c("ltv", "day","animal", "action")
minibatch_parameters = make_parameter_mat(minibatch_size)
parameter_mat = minibatch_parameters
minibatch_parameters = make_parameter_mat(minibatch_size)
parameter_mat = minibatch_parameters
parameter_vec= minibatch_parameters[1,]
one.sequence=generate_one(c(), parameter_vec = parameter_vec, maxtime = 20)
input_vec = c(unit.to.r(0.216),unit.to.r(.30441), unit.to.r(1.707,3))
optim.obj = optim(input_vec, obj.fnc, one.sequence=one.sequence)
obj.fnc(input_vec, one.sequence = one.sequence)
length(one.sequence)
minibatch_parameters = make_parameter_mat(minibatch_size)
parameter_mat = minibatch_parameters
parameter_vec= minibatch_parameters[1,]
one.sequence=generate_one(c(), parameter_vec = parameter_vec, maxtime = 20)
one.sequence
one.sequence=generate_one(c(), parameter_vec = parameter_vec, maxtime = 20)$ltv
input_vec = c(unit.to.r(0.216),unit.to.r(.30441), unit.to.r(1.707,3))
optim.obj = optim(input_vec, obj.fnc, one.sequence=one.sequence)
mt=length(one.sequence)
parameter_vec = c(r.to.unit(input_vec[1]), r.to.unit(input_vec[2]), r.to.unit(input_vec[3],3))
names(parameter_vec) = c("mu","lambda","rho")
one.sim = generate_one(radiation_days = radiation_days,parameter_vec=parameter_vec, maxtime = mt)$ltv
-sqrt(sum((one.sim-one.sequence)^2))
optim.obj = optim(input_vec, obj.fnc, one.sequence=one.sequence)
obj.fnc = function(input_vec, one.sequence,radiation_days=c()){
mt=length(one.sequence)
parameter_vec = c(r.to.unit(input_vec[1]), r.to.unit(input_vec[2]), r.to.unit(input_vec[3],3))
names(parameter_vec) = c("mu","lambda","rho")
one.sim = generate_one(radiation_days = radiation_days,parameter_vec=parameter_vec, maxtime = mt)$ltv
-sqrt(sum((one.sim-one.sequence)^2))
}
optim.obj = optim(input_vec, obj.fnc, one.sequence=one.sequence)
optim.obj$convergence
optim.obj$par
r.to.unit(210.7)
r.to.unit(-73.09332)
r.to.unit(-33.919,3)
parameter_vec
parameter_vec= minibatch_parameters[1,]
one.sequence=generate_one(c(), parameter_vec = parameter_vec, maxtime = 20)$ltv
optimize.model = function(one.sequence, radiation_days=c()){
input_vec = c(unit.to.r(0.216),unit.to.r(.30441), unit.to.r(1.707,3))
optim.obj = optim(input_vec, obj.fnc, one.sequence=one.sequence)
optim.obj$par
}
pp = optimize.model(one.sequence)
pp
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
pp = optimize.model(one.sequence)
pp
unit.to.r(pp)
r.to.unit(1.28)
r.to.unit(-1.310)
r.to.unit(-0.29636)
parameter_vec
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/data_generation_fncs.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
parameter_vec
parameter_vec[c("mu","rho","lambda")]
one.sequence = generate_one(radiation_days = c(), parameter_vec = parameter_vec, maxtime=20)
estimated.par = optimize.model(one.sequence)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
one.action
one.action = get.optim.plan(parameter_vec=estimated.par,maxtime=maxtime, all.action.mat = all.action.mat)
one.agent.treated.sequence = generate_one(cumsum(one.action)+15, parameter_vec=parameter_vec, maxtime=40)$ltv
agent.outcomes[mouse] = log(one.agent.treated.sequence[maxtime])
source('~/RPAI/online/online-2pulse-working/test_engine.R')
selected_actions
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
agent.outcomes
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions, optimal_actions)
all.action.mat
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions, optimal_actions)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/data_generation_fncs.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
mouse
refday.idx
one.reference
length(one.reference)
one.optima
reference_day
reference_day-wait_time
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions, optimal_actions)
potential_actions
source('~/RPAI/online/online-2pulse-working/test_engine.R')
test_num=100
maxtime = 40
num_free_pulses=1
wait_time=9
potential_actions = 1:11 + wait_time
all.action.mat = make_potential_action_mat(potential_actions = potential_actions, num_free_pulses = num_free_pulses)
inc_days = 15-2+wait_time
agent.outcomes=rep(NA, test_num)
reference_days=c(10,14,20)
reference.outcomes=matrix(NA, nrow=test_num, ncol=length(reference_days))
colnames(reference.outcomes) = c(paste("day",reference_days),'random')
selected_actions=matrix(NA, nrow=test_num, ncol=num_free_pulses)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
selected_actions
sd(selected_actions)
table(selected_actions, optimal_actions)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
nrow(minibatch_parameters)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions, optimal_actions)
source('~/RPAI/online/online-2pulse-working/data_generation_fncs.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions, optimal_actions)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/data_generation_fncs.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions, optimal_actions)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
plot(minibatch_parameters[,'mu'], est.par.mat[,"mu"])
plot(minibatch_parameters[,'rho'], est.par.mat[,"rho"])
plot(minibatch_parameters[,'lambda'], est.par.mat[,"lambda"])
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/data_generation_fncs.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
min(minibatch_parameters[,"rho"])
max(minibatch_parameters[,"rho"])
.8-.6
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/data_generation_fncs.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions)
table(optimal_actions)
table(minibatch_parameters[,'lambda'], est.par.mat[,'lambda'])
plot(minibatch_parameters[,'lambda'], est.par.mat[,'lambda'])
plot(minibatch_parameters[,'rho'], est.par.mat[,'rho'])
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
plot(minibatch_parameters[,'rho'], est.par.mat[,'rho'])
plot(minibatch_parameters[,'lambda'], est.par.mat[,'lambda'])
plot(minibatch_parameters[,'mu'], est.par.mat[,'mu'])
min(minibatch_parameters[,'mu'])
ax(minibatch_parameters[,'mu'])
max(minibatch_parameters[,'mu'])
max(est.par.mat[,'mu'])
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
plot(minibatch_parameters[,'mu'], est.par.mat[,'mu'])
plot(minibatch_parameters[,'lambda'], est.par.mat[,'lambda'])
plot(minibatch_parameters[,'rho'], est.par.mat[,'rho'])
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
plot(minibatch_parameters[,'rho'], est.par.mat[,'rho'])
plot(minibatch_parameters[,'lambda'], est.par.mat[,'lambda'])
plot(minibatch_parameters[,'mu'], est.par.mat[,'mu'])
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions)
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
mt=length(one.sequence)
parameter_vec = c(r.to.unit(input_vec[1]), r.to.unit(input_vec[2]), (r.to.unit(input_vec[3])*.2+1.6))
names(parameter_vec) = c("mu","lambda","rho")
one.sim.pair = generate_one(radiation_days = radiation_days,parameter_vec=parameter_vec, maxtime = mt)
one.sim = one.sim.pair$ltv
day.vec=1:mt
sim.mod = lm(log(one.sim)+day.vec*cumsum(one.sim.pair$d/10))
real.mod = lm(log(one.sequence)+day.vec*cumsum(one.sim.pair$d/10))
radiation_days=c()
mt=length(one.sequence)
parameter_vec = c(r.to.unit(input_vec[1]), r.to.unit(input_vec[2]), (r.to.unit(input_vec[3])*.2+1.6))
names(parameter_vec) = c("mu","lambda","rho")
one.sim.pair = generate_one(radiation_days = radiation_days,parameter_vec=parameter_vec, maxtime = mt)
one.sim = one.sim.pair$ltv
day.vec=1:mt
sim.mod = lm(log(one.sim)+day.vec*cumsum(one.sim.pair$d/10))
real.mod = lm(log(one.sequence)+day.vec*cumsum(one.sim.pair$d/10))
sim.mod = lm(log(one.sim)+day.vec*dose.vec)
dose.vec=cumsum(one.sim.pair$d/10)
sim.mod = lm(log(one.sim)+day.vec*dose.vec)
sim.mod = lm(log(one.sim)~day.vec*dose.vec)
real.mod = lm(log(one.sequence)~day.vec*dose.vec)
sim.mod$coefficients
sim.mod$coefficients - real.mod$coefficients
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions)
table(est.par.mat[,'lambda'], minibatch_parameters[,'lambda'])
plot(est.par.mat[,'lambda'], minibatch_parameters[,'lambda'])
plot(est.par.mat[,'rho'], minibatch_parameters[,'rho'])
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
plot(est.par.mat[,'rho'], minibatch_parameters[,'rho'])
plot(est.par.mat[,'lambda'], minibatch_parameters[,'lambda'])
plot(minibatch_parameters[,'mu'], est.par.mat[,'mu'])
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions)
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
plot(minibatch_parameters[,'mu'], est.par.mat[,'mu'])
plot(minibatch_parameters[,'rho'], est.par.mat[,'rho'])
plot(minibatch_parameters[,'lambda'], est.par.mat[,'lambda'])
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
plot(minibatch_parameters[,'lambda'], est.par.mat[,'lambda'])
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
min(minibatch_parameters[,'lambda'])
max(minibatch_parameters[,'lambda'])
mu=1
sig=1
prop.fail = seq(0,1, length.out = 100)
ln.tp = mu+ sig*log(prop.fail/(1-prop.fail))
plot(ln.tp, prop.fail, type="n")
axis(side=1,at=ln.tp, labels=exp(ln.tp))
plot(ln.tp, prop.fail, type="n",xaxt="n")
axis(side=1,at=ln.tp, labels=exp(ln.tp))
axis(side=1,at=ln.tp, labels=round(exp(ln.tp), digits=2))
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
ln.tp.11 = 1+ ln.tp
ln.tp.12 = 1 + 2*lntp
points(ln.tp.11, prop.fail, pch=16)
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/.active-rstudio-document')
source('~/LDA/hw3-1.R')
head(minibatch_parameters)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
?runif
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
plot(minibatch_parameters[,'lambda'], est.par.mat[,'lambda'],pch=16, main="lambda", ylab="estimated", xlab="actual")
plot(minibatch_parameters[,'rho'], est.par.mat[,'rho'], pch=16,main="rho", ylab="estimated", xlab="actual")
plot(minibatch_parameters[,'mu'], est.par.mat[,'mu'], pch=16,main="mu", ylab="estimated", xlab="actual")
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
one.fit
mt=length(one.sequence)
parameter_vec = c(r.to.unit(input_vec[1]), r.to.unit(input_vec[2]), (r.to.unit(input_vec[3])*.2+1.6))
names(parameter_vec) = c("mu","lambda","rho")
one.sim.pair = generate_one(radiation_days = radiation_days,parameter_vec=parameter_vec, maxtime = mt)
one.sim = one.sim.pair$ltv
day.vec=1:mt
dose.vec=cumsum(one.sim.pair$d/10)
sim.mod = lm(log(one.sim)~day.vec*dose.vec)
real.mod = lm(log(one.sequence)~day.vec*dose.vec)
sim.mod$effects
summary(sim.mod)
ss.sim = summary(sim.mod)
ss.sim$r.squared
ss.obs = summary(real.mod)
ss.obs$r.squared
as.numeric(ss.sim$coefficients)
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
all.action.mat
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
selected_actions
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(optimal_actions, optima.verif)
length(optimal_actions)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(optima.verif)
table(optima.verif, optimal_actions)
ss.sim
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/data_generation_fncs.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/data_generation_fncs.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/data_generation_fncs.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(optimal_actions)
table(selected_actions)
source('~/RPAI/online/online-2pulse-working/env_fncs_2pulse.R')
source('~/RPAI/online/online-2pulse-working/data_generation_fncs.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions)
est.par.mat
estimated.par
source('~/RPAI/online/online-2pulse-working/test_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions, optimal_actions)
apply(est.par.mat[,2], sd)
apply(est.par.mat[,2], c(2),sd)
apply(est.par.mat, c(2),sd)
colors = c("red","blue","orange","purple")
plot(density(agent.outcomes-reference.outcomes[,1]), xlab="fixed final ltv - agent final ltv",type="n",xlim=c(-.2,.2), main="2 pulse performance", col="red", ylim=c(0,60))
for(refday.idx in 1:4){
deltaref = reference.outcomes[,refday.idx]
lines(density(deltaref - agent.outcomes), col=colors[refday.idx])
test=t.test(deltaref-agent.outcomes)
print(test)
cohen = mean(deltaref-agent.outcomes)/sd(deltaref-agent.outcomes)
cat("effect size: ", cohen)
effect.sizes[refday.idx] = cohen
#cat(agent.outcomes[agent.outcomes>deltaref])
}
#effect.sizes[4] = mean(delta.diff.random)/sd(delta.diff.random)
#lines(density(abs(optimal_actions-sample(potential_actions, test_num, replace=T)) - agent.outcomes), col="purple")
legend("topright", legend=paste(c(paste("day", reference_days), "random"), round(effect.sizes, 3), sep=": d="), pch=16, col=c(colors, "purple"))
abline(v=0, lty=2)
git add -A
source('~/RPAI/online/online-2pulse-3param-v6/online_engine.R')
setwd("~/Documents/Dissertation/RPAI/online/online-2pulse-3param-v6")
setwd("~/RPAI/online/online-2pulse-3param-v6")
source('~/RPAI/online/online-2pulse-3param-v6/online_engine.R')
source('~/RPAI/online/online-2pulse-3param-v6/test_engine.R')
table(selected_actions, optimal_actions)
saveRDS(q.fit, "model.rds")
source('~/RPAI/online/online-2pulse-3param-v6/test_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/online_engine.R')
source('~/RPAI/online/online-2pulse-working/test_engine.R')
table(selected_actions, optimal_actions)
source('~/RPAI/online/online-2pulse-working/test_engine.R')
saveRDS(q.fit, "model.rds")
